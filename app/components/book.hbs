{{! template-lint-disable no-invalid-interactive }}
<div
  class="book"
  {{on "click" (fn this.showBookDetails @book)}}
  {{on "clikc" this.stopPropagation}}
>
  <img src={{@book.image}} alt="book-image" />
  <div class="detail">
    <p class="title">{{@book.title}}</p>
    <p class="subtitle">{{@book.subtitle}}</p>
    {{yield
      this.getReturnDays
      this.returnBook
      this.borrowBook
      @book.id
      this.deleteBook
      @book.stock
      this.stopPropagation
      this.getBorrowedBookHistory
    }}
  </div>
</div>

{{#if this.selectedBook}}
  <div class="popup" {{close-popup this.closeDetails}}>
    <div class="book-popup">
      <span class="close" {{on "click" this.closeDetails}}>&times;</span>
      <div class="temp">
        <img src={{this.selectedBook.image}} alt="BookImage" />
        <div class="book-details">
          <h2>{{this.selectedBook.title}}</h2>
          <p><strong>Subtitle:</strong> {{this.selectedBook.subtitle}}</p>
          <p><strong>Author:</strong> {{this.selectedBook.author}}</p>
          <p><strong>Publisher:</strong> {{this.selectedBook.publisher}}</p>
          <p><strong>Published Year:</strong>
            {{this.selectedBook.publishedYear}}</p>
          <p><strong>Genre:</strong> {{this.selectedBook.genre}}</p>
          <p><strong>Language:</strong> {{this.selectedBook.language}}</p>
          <p><strong>Pages:</strong> {{this.selectedBook.pages}}</p>
          <p><strong>Stock:</strong> {{this.selectedBook.stock}}</p>
          <p><strong>Description:</strong></p>
          <p class="description">{{this.selectedBook.description}}</p>
        </div>
      </div>
      {{#if @isAdmin}}
        {{#if (gte this.bookHistory.length 0)}}
          <AdminTable
            @headings={{array "NAME" "TITLE" "Borrow Date" "Return Date" "IsReturn"}}
            @fields={{array "student_id" "book_id" "borrowDate" "returnDate" "isReturned"}}
            @data={{this.bookHistory}}
          />
          {{else}}
            <span
          id="borrowed-by"
          {{on "click" (fn this.getBookHistory @book.borrowedBooks_id)}}
        >Brrowed By...</span>
        {{/if}}
      {{/if}}
    </div>
  </div>
{{/if}}
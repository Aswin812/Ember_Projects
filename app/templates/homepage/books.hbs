<div class="options">
  <Options @sort={{@model.sort}} @currentBooks={{@model.book}} @bookOption="All" />
  <Search @search={{@model.search}} />
</div>

<div id="books">
  {{#each @model.books.filteredBooks as |book|}}
    <Book @book={{book}} as |returnDays returnBook borrowBook _ _ stock stopPropagation getBorrowedBookHistory|>
      {{#if (eq @model.book "borrowed-books")}}
        {{#let (getBorrowedBookHistory book.id) as |b|}}
          <p class="msg">{{returnDays b}}</p>
          <button type="button" id="borrow-btn" {{on 'click' (fn returnBook b.id book.id)}} {{on 'click' stopPropagation}}>Return</button>
        {{/let}}
      {{else}}
        {{#if (gt stock 0)}}
          <button type="button" id="borrow-btn" {{on 'click' (fn borrowBook book.id)}} {{on 'click' stopPropagation}}>Borrow</button>
        {{else}}
          {{!-- template-lint-disable no-invalid-interactive --}}
          <p class="msg" {{on 'click' stopPropagation}}>Out of Stock</p>
        {{/if}}
      {{/if}}
    </Book>
    {{else}}
    <p>No Records Available</p>
  {{/each}}
</div>